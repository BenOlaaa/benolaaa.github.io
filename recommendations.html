<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BenO’s Amazon Recommendations</title>
  <meta name="description" content="Buyer’s guides and fitness gear I actually use. As an Amazon Associate I earn from qualifying purchases.">
  <style>
    :root{
      --bg:#ffffff;--text:#10131e;--muted:#687085;
      --card:#ffffff;--edge:#e6e8ee;--shadow:0 8px 22px rgba(0,0,0,.06);
      --radius:16px;--gap:clamp(14px,2.2vw,22px);--maxw:1080px;
      --btn:#10131e;--btnText:#ffffff;
      --pill:#e9eef7;--pillActive:#10131e;--pillActiveText:#ffffff;
      --soft:#f6f8fc;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg:#0b0d13;--text:#f3f6ff;--muted:#a5aec6;
        --card:#0f1422;--edge:#1b2337;--shadow:0 8px 24px rgba(0,0,0,.5);
        --btn:#f3f6ff;--btnText:#0b0d13;
        --pill:#1b2236;--pillActive:#f3f6ff;--pillActiveText:#0b0d13;
        --soft:#11172a;
      }
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font:16px/1.65 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    a{color:inherit;text-decoration:none}
    img{display:block;width:100%;height:100%;object-fit:cover;border-radius:12px}

    /* Header */
    header{position:sticky;top:0;z-index:40;background:var(--bg);border-bottom:1px solid var(--edge)}
    .bar{max-width:var(--maxw);margin:0 auto;padding:.7rem var(--gap);display:flex;justify-content:space-between;align-items:center}
    .brand{font-weight:800}
    .note{font-size:.85rem;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

    /* Intro */
    .wrap{max-width:var(--maxw);margin:0 auto;padding:0 var(--gap)}
    .hero{padding:26px 0 6px}
    .hero h1{margin:0 0 6px;font-size:clamp(26px,4.6vw,40px);letter-spacing:-.02em;line-height:1.1}
    .hero p{margin:0;color:var(--muted)}

    /* Tabs */
    .tabs{margin:18px 0 14px}
    .pillbar{display:flex;gap:10px;overflow:auto;padding:6px;border-radius:999px;background:var(--soft);scrollbar-width:none}
    .pillbar::-webkit-scrollbar{display:none}
    .pill{white-space:nowrap;padding:8px 14px;border-radius:999px;background:var(--pill);color:var(--text);
      font-weight:700;font-size:.95rem;opacity:.95;transition:all .2s ease;border:1px solid var(--edge)}
    .pill[aria-selected="true"]{background:var(--pillActive);color:var(--pillActiveText);opacity:1;box-shadow:0 0 0 2px rgba(0,0,0,.06)}
    .pill:focus-visible{outline:none;box-shadow:0 0 0 3px rgba(0,0,0,.12)}

    /* Category title */
    .category-title{margin:8px 0 12px;font-weight:800;letter-spacing:.3px}

    /* Grid/Cards */
    .grid{display:grid;gap:var(--gap);grid-template-columns:repeat(auto-fill,minmax(260px,1fr))}
    .card{display:flex;flex-direction:column;gap:12px;background:var(--card);border:1px solid var(--edge);
      border-radius:var(--radius);box-shadow:var(--shadow);padding:14px}
    .media{aspect-ratio:4/3;background:rgba(0,0,0,.04);border-radius:12px;overflow:hidden}
    .title{font-weight:800;font-size:1.02rem;line-height:1.3}
    .desc{color:var(--muted);font-size:.95rem}
    .actions{margin-top:auto;display:flex;gap:10px}
    .btn{flex:1;display:inline-flex;align-items:center;justify-content:center;padding:10px 12px;border-radius:10px;
      font-weight:800;background:var(--btn);color:var(--btnText);border:1px solid transparent;transition:opacity .15s ease}
    .btn:hover{opacity:.9}

    /* Footer */
    .foot{padding:26px 0 60px;color:var(--muted);font-size:.9rem;text-align:center}
  </style>
</head>
<body>
  <header>
    <div class="bar">
      <div class="brand">BenO Recommends</div>
      <div class="note"><strong>Disclosure:</strong> As an Amazon Associate I earn from qualifying purchases.</div>
    </div>
  </header>

  <div class="wrap">
    <section class="hero" aria-labelledby="h1">
      <h1 id="h1">Buyer’s Guides & Gear I Actually Use</h1>
      <p>Simple, sustainable fitness. Each pick explains what it’s best for, who it isn’t for, and a tip so you can buy once and use it often.</p>
    </section>

    <!-- Tabs -->
    <nav class="tabs" role="tablist" aria-label="Categories">
      <div class="pillbar" id="pillbar"></div>
    </nav>

    <!-- Category title + cards -->
    <h2 class="category-title" id="catTitle"></h2>
    <main class="grid" id="grid" aria-live="polite" aria-busy="false"></main>

    <!-- Clean Disclosure -->
    <div class="foot">
      <p><strong>Disclosure:</strong> As an Amazon Associate I earn from qualifying purchases. 
      Prices and availability are accurate as of the time of posting and are subject to change.</p>
    </div>
  </div>

  <script>
    // Keep amzn.to links as-is; add your US tag to full amazon URLs.
    function withAmazonTag(url){
      try{
        const u = new URL(url);
        if (/^amzn\.to$/i.test(u.hostname)) return u.toString();           // SiteStripe short link – already tagged
        if (/\.amazon\./i.test(u.hostname)){                                // Full Amazon URL – ensure tag
          if (!u.searchParams.has("tag")) u.searchParams.set("tag","boamazon0b3-20"); // your US store ID
          return u.toString();
        }
      }catch(e){}
      return url;
    }

    const sections = [/* ... your product data unchanged ... */];

    // DOM
    const pillbar = document.getElementById('pillbar');
    const grid = document.getElementById('grid');
    const catTitle = document.getElementById('catTitle');

    function renderPills(){
      pillbar.innerHTML = "";
      sections.forEach((cat,i)=>{
        const b = document.createElement('button');
        b.className = 'pill';
        b.setAttribute('role','tab');
        b.setAttribute('aria-selected', i===0 ? 'true':'false');
        b.textContent = cat.title;
        b.addEventListener('click', ()=>selectTab(i));
        pillbar.appendChild(b);
      });
    }

    function cardTemplate(item){
      const url = withAmazonTag(item.href);
      return `
        <article class="card">
          <div class="media"><img src="${item.image}" alt="${item.title}"></div>
          <div class="title">${item.title}</div>
          <div class="desc">${item.desc}</div>
          <div class="actions">
            <a class="btn" href="${url}" target="_blank" rel="noopener sponsored nofollow">View on Amazon</a>
          </div>
        </article>
      `;
    }

    function renderCards(index=0){
      grid.setAttribute('aria-busy','true');
      const group = sections[index];
      catTitle.textContent = group.title;
      grid.innerHTML = group.items.map(cardTemplate).join('');
      grid.setAttribute('aria-busy','false');
    }

    function selectTab(i){
      [...pillbar.querySelectorAll('.pill')].forEach((p,idx)=>p.setAttribute('aria-selected', idx===i ? 'true':'false'));
      renderCards(i);
    }

    // Boot
    renderPills();
    renderCards(0);
  </script>
</body>
</html>
